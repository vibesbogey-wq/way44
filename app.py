import os
from flask import Flask, request, jsonify
from dotenv import load_dotenv
from openai import OpenAI

# ---------------- ENV –ê–ß–ê–ê–õ–õ–ê–• ---------------- #
load_dotenv()

OPENAI_API_KEY = os.getenv("OPENAI_API_KEY")

if not OPENAI_API_KEY:
    raise RuntimeError("OPENAI_API_KEY environment variable –±–∞–π—Ö–≥“Ø–π –±–∞–π–Ω–∞!")

client = OpenAI(api_key=OPENAI_API_KEY)

app = Flask(__name__)

# ---------------- –•”®–¢”®–õ–ë”®–†“Æ“Æ–î–ò–ô–ù –î–ê–¢–ê ---------------- #
COURSE_DATA = [
    {
        "course_name": "–°—Ç—Ä–∞—Ç–µ–≥–∏–π–Ω –î–∏–∂–∏—Ç–∞–ª –ú–∞—Ä–∫–µ—Ç–µ—Ä",
        "keywords": [
            "—Å—Ç—Ä–∞—Ç–µ–≥–∏–π–Ω –¥–∏–∂–∏—Ç–∞–ª –º–∞—Ä–∫–µ—Ç–µ—Ä", "digital marketer", "–¥–∏–∂–∏—Ç–∞–ª –º–∞—Ä–∫–µ—Ç–∏–Ω–≥",
            "–º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∏–π–Ω —Ö”©—Ç”©–ª–±”©—Ä", "–º–∞—Ä–∫–µ—Ç–µ—Ä", "facebook —Å—É—Ä—Ç–∞–ª—á–∏–ª–≥–∞–∞",
            "instagram —Å—É—Ä—Ç–∞–ª—á–∏–ª–≥–∞–∞", "seo", "blue ocean"
        ],
        "description": (
            "–¢–∞–∞–º–∞–≥–ª–∞—Ö–∞–∞ –±–æ–ª—å, “Ø—Ä –¥“Ø–Ω–≥ —É–¥–∏—Ä–¥! –≠–Ω—ç —Ö”©—Ç”©–ª–±”©—Ä –Ω—å –∫–∞—Ä—å–µ—Ä–∞–∞ —ç—Ö–ª“Ø“Ø–ª—ç—Ö, "
            "–±–∏–∑–Ω–µ—Å—ç—ç ”©—Å–≥”©—Ö –∑–æ—Ä–∏–ª–≥–æ—Ç–æ–π —Ö“Ø–Ω –±“Ø—Ä—Ç –∑–æ—Ä–∏—É–ª–∞–≥–¥—Å–∞–Ω.\n\n"
            "–ë–∏–¥ —Ç–∞–Ω–¥ –∑”©–≤—Ö”©–Ω 'Boost' –¥–∞—Ä–∞—Ö—ã–≥ –∑–∞–∞—Ö–≥“Ø–π. –•–∞—Ä–∏–Ω —Å—Ç—Ä–∞—Ç–µ–≥–∏–π–Ω –∞—Ö–∏—Å–∞–Ω —Ç“Ø–≤—à–Ω–∏–π —à–∏–Ω–∂–∏–ª–≥—ç—ç, "
            "Blue Ocean Strategy, —à–∏–ª–¥—ç–≥ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∏–π–Ω —Å—Ç—Ä–∞—Ç–µ–≥–∏ –±–æ–ª–æ–≤—Å—Ä—É—É–ª–∞—Ö —É—Ä —á–∞–¥–≤–∞—Ä, "
            "Facebook / Instagram —Å—É—Ä—Ç–∞–ª—á–∏–ª–≥–∞–∞–Ω—ã –∞—Ö–∏—Å–∞–Ω —Ç“Ø–≤—à–Ω–∏–π —Ç–µ—Ö–Ω–∏–∫“Ø“Ø–¥, “Ø–Ω—ç —Ü—ç–Ω—Ç—ç–π –∫–æ–Ω—Ç–µ–Ω—Ç "
            "–±“Ø—Ç—ç—ç—Ö —É—Ä–ª–∞–≥–∞–∞—Å —ç—Ö–ª—ç—ç–¥ SEO —Ö“Ø—Ä—Ç—ç–ª –¥–∏–∂–∏—Ç–∞–ª –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∏–π–Ω —Ü–æ–≥—Ü —É—Ä —á–∞–¥–≤–∞—Ä—ã–≥ —ç–∑—ç–º—à“Ø“Ø–ª–Ω—ç.\n\n"
            "–¢”©–≥—Å”©”©–¥:\n"
            "‚Ä¢ Meta –æ–ª–æ–Ω —É–ª—Å—ã–Ω —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç + Blockchain –±–∞—Ç–∞–ª–≥–∞–∞–∂—Å–∞–Ω –º—ç—Ä–≥—ç–∂–ª–∏–π–Ω —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç\n"
            "‚Ä¢ –ë–æ–¥–∏—Ç —Ç”©—Å”©–ª –¥—ç—ç—Ä –∞–∂–∏–ª–ª–∞–∂ –æ—Ä–ª–æ–≥–æ –æ–ª–∂ —ç—Ö–ª—ç—Ö –±–æ–ª–æ–º–∂"
        ),
        "teacher": "–≠. –≠–Ω—Ö–∑–∞—è–∞ (Way Academy-–∏–π–Ω “Ø“Ø—Å–≥—ç–Ω –±–∞–π–≥—É—É–ª–∞–≥—á, CEO)",
        "duration": "5 —Å–∞—Ä (7 —Ö–æ–Ω–æ–≥—Ç 2 —É–¥–∞–∞)",
        "schedule": {
            "evening": "–û—Ä–æ–π–Ω –∞–Ω–≥–∏: –ú—è–≥–º–∞—Ä, –ü“Ø—Ä—ç–≤ 18:00‚Äì21:00",
            "daytime": "”®–¥—Ä–∏–π–Ω –∞–Ω–≥–∏: –õ—Ö–∞–≥–≤–∞, –ë—è–º–±–∞ 14:00‚Äì17:00"
        },
        "price": {
            "full": None,
            "discount": None,
            "discount_until": None
        },
        "payment_options": [
            "–¢”©–ª–±”©—Ä–∏–π–Ω –¥—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π –º—ç–¥—ç—ç–ª–ª–∏–π–≥ –º–µ–Ω–µ–∂–µ—Ä—Ç—ç–π —Ö–æ–ª–±–æ–≥–¥–æ–Ω –ª–∞–≤–ª–∞–Ω–∞ —É—É. (99201187)"
        ]
    },
    {
        "course_name": "Data Analyst",
        "keywords": [
            "data analyst", "–¥–∞—Ç–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫", "”©–≥”©–≥–¥–ª–∏–π–Ω —à–∏–Ω–∂—ç—ç—á",
            "”©–≥”©–≥–¥”©–ª", "–∞–Ω–∞–ª–∏—Å—Ç", "python", "google —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç"
        ],
        "description": (
            "”®–≥”©–≥–¥–ª–∏–π–Ω —à–∏–Ω–∂—ç—ç—á–∏–π–Ω –º—ç—Ä–≥—ç–∂–∏–ª —ç–∑—ç–º—à“Ø“Ø–ª—ç—Ö 100% –∞–∂–ª—ã–Ω –±–∞–π—Ä—Ç–∞–π —Ö”©—Ç”©–ª–±”©—Ä.\n\n"
            "‚Ä¢ –û–ª–æ–Ω —É–ª—Å–∞–¥ –∑”©–≤—à”©”©—Ä”©–≥–¥”©—Ö Google-–Ω —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –±–æ–ª–æ–Ω –º—ç—Ä–≥—ç–∂–ª–∏–π–Ω —Ö–æ—Å–æ–ª—Å–æ–Ω —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—Ç–∞–π\n"
            "‚Ä¢ ”®–≥”©–≥–¥”©–ª –±–æ–ª–æ–≤—Å—Ä—É—É–ª–∂ —à–∏–Ω–∂–ª—ç—Ö, “Ø—Ä –¥“Ø–Ω–≥ —Ç–∞–π–ª–∞–≥–Ω–∞—Ö –∞—Ä–≥–∞—á–ª–∞–ª—É—É–¥—ã–≥ —Å—É—Ä–∞–ª—Ü–∞–Ω–∞\n"
            "‚Ä¢ Python –ø—Ä–æ–≥—Ä–∞–º–º –¥—ç—ç—Ä –¥–∞—Ç–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏–π–Ω –∞—Ö–∏—Å–∞–Ω —Ç“Ø–≤—à–Ω–∏–π —Ö—ç—Ä—ç–≥—Å–ª“Ø“Ø–¥–∏–π–≥ –ø—Ä–∞–∫—Ç–∏–∫—Ç –∞—à–∏–≥–ª–∞–∂ —Å—É—Ä–Ω–∞\n"
            "‚Ä¢ –¢“Ø–Ω—à –∫–æ–º–ø–∞–Ω–∏—É–¥—ã–Ω —Ç”©—Å”©–ª –¥—ç—ç—Ä –¥–∞–¥–ª–∞–≥–∞ —Ö–∏–π–∂, —Ç”©–≥—Å”©”©–¥ —à—É—É–¥ –∞–∂–ª—ã–Ω –±–∞–π—Ä–∞–Ω–¥ –∑—É—É—á–ª—É—É–ª–∞—Ö –±–æ–ª–æ–º–∂—Ç–æ–π\n\n"
            "”®–≥”©–≥–¥”©–ª–¥ —Å—É—É—Ä–∏–ª—Å–∞–Ω —à–∏–π–¥–≤—ç—Ä –≥–∞—Ä–≥–∞–∂, –±–∏–∑–Ω–µ—Å–∏–π–Ω –∞–º–∂–∏–ª—Ç—ã–≥ –¥—ç–º–∂–∏—Ö —á–∞–¥–≤–∞—Ä–∞–∞ —Ö”©–≥–∂“Ø“Ø–ª—ç—Ö–∏–π–≥ "
            "—Ö“Ø—Å—ç–∂ –±–∞–π–≤–∞–ª —ç–Ω—ç —Ö”©—Ç”©–ª–±”©—Ä —Ç–∞–Ω–¥ –∑–æ—Ä–∏—É–ª–∞–≥–¥—Å–∞–Ω."
        ),
        "teacher": "–ß. –ê–ª—Ç–∞–Ω-”®–ª–∑–∏–π (Data Analyst-–∏–π–Ω –º–∞—Å—Ç–µ—Ä –±–∞–≥—à)",
        "duration": "4 —Å–∞—Ä",
        "schedule": {
            "weekend": "–ê–º—Ä–∞–ª—Ç—ã–Ω ”©–¥—Ä–∏–π–Ω –∞–Ω–≥–∏: –ë—è–º–±–∞, –ù—è–º 11:00‚Äì14:00 (–¥–æ–ª–æ–æ —Ö–æ–Ω–æ–≥—Ç 2 —É–¥–∞–∞)",
            "weekday": "–ê–∂–ª—ã–Ω ”©–¥—Ä–∏–π–Ω –∞–Ω–≥–∏: –î–∞–≤–∞–∞, –õ—Ö–∞–≥–≤–∞ 19:00‚Äì22:00 (–¥–æ–ª–æ–æ —Ö–æ–Ω–æ–≥—Ç 2 —É–¥–∞–∞)"
        },
        "price": {
            "full": "5,842,000‚ÇÆ",
            "discount": "5,242,000‚ÇÆ",
            "discount_until": "8 —Å–∞—Ä—ã–Ω 31 —Ö“Ø—Ä—Ç—ç–ª (Final Chance)"
        },
        "payment_options": [
            "–£—Ä—å–¥—á–∏–ª–≥–∞–∞ 500,000‚Äì1,500,000‚ÇÆ —Ç”©–ª”©”©–¥ “Ø–ª–¥—Å—ç–Ω —Ç”©–ª–±”©—Ä”©”© 2025/12 —Å–∞—Ä —Ö“Ø—Ä—Ç—ç–ª —Å–∞—Ä –±“Ø—Ä —Ö—É–≤–∞–∞–∂ —Ç”©–ª”©—Ö –±–æ–ª–æ–º–∂—Ç–æ–π.",
            "PocketZero-–æ–æ—Ä 12 —Å–∞—Ä —Ö“Ø—Ä—Ç—ç–ª—Ö —Ö“Ø“Ø–≥“Ø–π, —à–∏–º—Ç–≥—ç–ª–≥“Ø–π —Ç”©–ª”©—Ö –±–æ–ª–æ–º–∂—Ç–æ–π."
        ]
    },
    {
        "course_name": "IT Business Analyst",
        "keywords": [
            "it business analyst", "–∏—Ç –±–∏–∑–Ω–µ—Å –∞–Ω–∞–ª–∏—Å—Ç", "–±–∏–∑–Ω–µ—Å –∞–Ω–∞–ª–∏—Å—Ç",
            "business analyst", "–±–∞ –±–∏–∑–Ω–µ—Å —à–∏–Ω–∂—ç—ç—á", "it –±–∞"
        ],
        "description": (
            "IT Business Analyst –º—ç—Ä–≥—ç–∂–∏–ª —ç–∑—ç–º—à“Ø“Ø–ª—ç—Ö 100% –∞–∂–ª—ã–Ω –±–∞–π—Ä—Ç–∞–π —Ö”©—Ç”©–ª–±”©—Ä.\n\n"
            "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏ –±–æ–ª–æ–Ω –±–∏–∑–Ω–µ—Å–∏–π–Ω –º—ç–¥–ª—ç–≥, —É—Ä —á–∞–¥–≤–∞—Ä—ã–≥ —Ü–æ–≥—Ü–ª–æ–æ—Å–æ–Ω –º—ç—Ä–≥—ç–∂–∏–ª—Ç—ç–Ω –±–æ–ª–∂ "
            "—Ö”©–¥”©–ª–º”©—Ä–∏–π–Ω –∑–∞—Ö –∑—ç—ç–ª–¥ –¥–∞–≤–∞–º–≥–∞–π–ª–Ω–∞.\n\n"
            "‚Ä¢ –ë–∏–∑–Ω–µ—Å–∏–π–Ω “Ø–π–ª –∞–∂–∏–ª–ª–∞–≥–∞–∞–≥ –æ–Ω–æ–≤—á—Ç–æ–π –±–æ–ª–≥–æ—Ö, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π–Ω —à–∏–π–¥—ç–ª –±–æ–ª–æ–≤—Å—Ä—É—É–ª–∞—Ö —á–∞–¥–≤–∞—Ä —ç–∑—ç–º—à–∏–Ω—ç\n"
            "‚Ä¢ –ü—Ä–æ—Ü–µ—Å—Å—ã–Ω —à–∏–Ω–∂–∏–ª–≥—ç—ç, —Ç”©—Å–ª–∏–π–Ω –º–µ–Ω–µ–∂–º–µ–Ω—Ç–∏–π–Ω –∞—Ä–≥–∞ –±–∞—Ä–∏–ª–¥ —Å—É—Ä–∞–ª—Ü–∞–Ω–∞\n"
            "‚Ä¢ –ú–æ–Ω–≥–æ–ª—ã–Ω —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π–Ω –∫–æ–º–ø–∞–Ω–∏—É–¥—ã–Ω –±–æ–¥–∏—Ç —Ç”©—Å”©–ª –¥—ç—ç—Ä –ø—Ä–∞–∫—Ç–∏–∫ —Ö–∏—á—ç—ç–ª —Ö–∏–π–Ω—ç\n"
            "‚Ä¢ –ú—ç—Ä–≥—ç–∂–ª–∏–π–Ω —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—Ç–∞–π, 100% –∞–∂–ª—ã–Ω –±–∞–π—Ä–∞–Ω–¥ –±—ç–ª—Ç–≥—ç–≥–¥—ç–Ω—ç"
        ),
        "teacher": "–¢. –ë–∞—Ç–∑–∞—è–∞ (–¢–µ—Ö–Ω–æ–ª–æ–≥–∏ —Ö–∞—Ä–∏—É—Ü—Å–∞–Ω –∑–∞—Ö–∏—Ä–∞–ª, –º–∞—Å—Ç–µ—Ä –±–∞–≥—à)",
        "duration": "3 —Å–∞—Ä",
        "schedule": {
            "weekday": "–ú—è–≥–º–∞—Ä, –ü“Ø—Ä—ç–≤ 19:00‚Äì22:00 (–¥–æ–ª–æ–æ —Ö–æ–Ω–æ–≥—Ç 2 —É–¥–∞–∞)"
        },
        "price": {
            "full": None,
            "discount": None,
            "discount_until": None
        },
        "payment_options": [
            "–¢”©–ª–±”©—Ä, —Ö”©–Ω–≥”©–ª”©–ª—Ç–∏–π–Ω —Ç–∞–ª–∞–∞—Ä –¥—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π–≥ –º–µ–Ω–µ–∂–µ—Ä—Ç—ç–π —Ö–æ–ª–±–æ–≥–¥–æ–Ω –ª–∞–≤–ª–∞–Ω–∞ —É—É. (99201187)"
        ]
    },
    {
        "course_name": "Project Zero: AI Agent Developer (Code the Future)",
        "keywords": [
            "project zero", "ai agent", "ai agent developer", "code the future",
            "agent developer", "ai developer", "–∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä", "–¥–∏–∂–∏—Ç–∞–ª –∞–∂–∏–ª—Ç–∞–Ω"
        ],
        "description": (
            "Project Zero: Code the Future –Ω—å —Ç–∞–Ω—ã–≥ AI —Ö—ç—Ä—ç–≥–ª—ç–≥—á—ç—ç—Å AI –±“Ø—Ç—ç—ç–≥—á '–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä' –±–æ–ª–≥–æ–Ω —Ö—É–≤–∏—Ä–≥–∞—Ö "
            "–æ–Ω—Ü–≥–æ–π 4 —Å–∞—Ä—ã–Ω –∞—è–ª–∞–ª —é–º.\n\n"
            "–¢–∞ —ç–Ω—ç –∞—è–ª–ª—ã–≥ –ú–æ–Ω–≥–æ–ª—ã–Ω —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π–Ω —Å–∞–ª–±–∞—Ä—ã–Ω —à–∏–ª–¥—ç–≥ —ç–∫—Å–ø–µ—Ä—Ç –ó. –ë–∞—Ç–∑–∞—è–∞-—Å —à—É—É–¥ "
            "—Å—É—Ä–∞–ª—Ü–∞–Ω —ç—Ö–ª“Ø“Ø–ª–Ω—ç. –¢–∞ —É—Ö–∞–∞–ª–∞–≥ —á–∞—Ç–±–æ—Ç, –¥–∞—Ç–∞ –∞–Ω–∞–ª–∏—Å—Ç –∞–≥–µ–Ω—Ç –∑—ç—Ä—ç–≥ –±–æ–¥–∏—Ç –∞—Å—É—É–¥–∞–ª —à–∏–π–¥–¥—ç–≥ "
            "'–¥–∏–∂–∏—Ç–∞–ª –∞–∂–∏–ª—Ç–∞–Ω'-—É—É–¥—ã–≥ ”©”©—Ä–∏–π–Ω –≥–∞—Ä–∞–∞—Ä –±“Ø—Ç—ç—ç—Ö –±–æ–ª–Ω–æ.\n\n"
            "–≠–ª—Å—ç–ª—Ç –Ω—å —Ç—É—Å–≥–∞–π, –∑”©–≤—Ö”©–Ω ”©—Ä–≥”©–¥–ª”©”©—Ä, —Ü”©”©–Ω —Ç–æ–æ–Ω—ã –∞–Ω—Ö–¥–∞–≥—á–¥—ã–≥ —Å–æ–Ω–≥–æ–Ω —à–∞–ª–≥–∞—Ä—É—É–ª–¥–∞–≥."
        ),
        "teacher": "–ó. –ë–∞—Ç–∑–∞—è–∞ (Project Zero, IT Business Analyst-–∏–π–Ω –º–∞—Å—Ç–µ—Ä –±–∞–≥—à)",
        "duration": "4 —Å–∞—Ä",
        "schedule": {
            "info": "–•—É–≤–∞–∞—Ä–∏–π–≥ ”©—Ä–≥”©–¥”©–ª –±–∞—Ç–ª–∞–≥–¥—Å–∞–Ω—ã –¥–∞—Ä–∞–∞ —ç—Ü—ç—Å–ª—ç–Ω —Ç–∞–Ω–∏–ª—Ü—É—É–ª–Ω–∞."
        },
        "price": {
            "full": "7,448,000‚ÇÆ",
            "discount": "6,640,000‚ÇÆ",
            "discount_until": "9 —Å–∞—Ä—ã–Ω 14 —Ö“Ø—Ä—Ç—ç–ª (Final Chance)"
        },
        "payment_options": [
            "–£—Ä—å–¥—á–∏–ª–≥–∞–∞ 1,000,000‚ÇÆ —Ç”©–ª”©”©–¥ “Ø–ª–¥—Å—ç–Ω —Ç”©–ª–±”©—Ä”©”© 2025/12 —Å–∞—Ä —Ö“Ø—Ä—Ç—ç–ª —É—è–Ω —Ö–∞—Ç–∞–Ω —Ö—É–≤–∞–∞–∂ —Ç”©–ª”©—Ö –±–æ–ª–æ–º–∂—Ç–æ–π.",
            "PocketZero-–æ–æ—Ä 12 —Å–∞—Ä —Ö“Ø—Ä—Ç—ç–ª—Ö —Ö“Ø“Ø–≥“Ø–π, —à–∏–º—Ç–≥—ç–ª–≥“Ø–π —Ç”©–ª”©—Ö –±–æ–ª–æ–º–∂—Ç–æ–π."
        ],
        "application_link": "https://forms.gle/qgyNEKecuJ22f5mYA"
    },
]

# ---------------- FAQ (–∞–∫–∞–¥–µ–º–∏, –±–∞–≥—à, –æ–Ω—Ü–ª–æ–≥, —Ö–æ–ª–±–æ–æ) ---------------- #
FAQ_LIST = [
    {
        "q_keywords": ["—Ö”©—Ç”©–ª–±”©—Ä", "—è–º–∞—Ä —Ö”©—Ç”©–ª–±”©—Ä", "course", "program", "programs", "—è–º–∞—Ä —è–º–∞—Ä –∞–Ω–≥–∏"],
        "answer": (
            "üéì Way Academy-–¥ –æ–¥–æ–æ–≥–æ–æ—Ä —ç–¥–≥—ç—ç—Ä —Ö”©—Ç”©–ª–±”©—Ä“Ø“Ø–¥ —è–≤–∞–≥–¥–∞–∂ –±–∞–π–Ω–∞:\n\n"
            "1Ô∏è‚É£ –°—Ç—Ä–∞—Ç–µ–≥–∏–π–Ω –î–∏–∂–∏—Ç–∞–ª –ú–∞—Ä–∫–µ—Ç–µ—Ä\n"
            "2Ô∏è‚É£ Data Analyst\n"
            "3Ô∏è‚É£ IT Business Analyst\n"
            "4Ô∏è‚É£ Project Zero: AI Agent Developer\n\n"
            "–ê–ª—å –Ω—å —Å–æ–Ω–∏—Ä—Ö–æ–∂ –±–∞–π–Ω–∞ –≤—ç? –•”©—Ç”©–ª–±”©—Ä–∏–π–Ω –Ω—ç—Ä–∏–π–≥ –ª –±–∏—á—ç—ç—Ä—ç–π, –¥—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π —Ç–∞–Ω–∏–ª—Ü—É—É–ª—ä—è üòä"
        ),
    },
    {
        "q_keywords": ["–æ–Ω—Ü–ª–æ–≥", "—è–ª–≥–∞—Ä–∞–ª", "way academy —é—É –Ω—å", "—è–∞–≥–∞–∞–¥ way academy"],
        "answer": (
            "Way Academy –Ω—å —Ö”©–¥”©–ª–º”©—Ä–∏–π–Ω –∑–∞—Ö –∑—ç—ç–ª –¥—ç—ç—Ä —è–≥ –æ–¥–æ–æ —Ö–∞–º–≥–∏–π–Ω —ç—Ä—ç–ª—Ç—Ç—ç–π –±–∞–π–≥–∞–∞ –º—ç—Ä–≥—ç–∂–ª“Ø“Ø–¥–∏–π–≥ "
            "–±–æ–≥–∏–Ω–æ —Ö—É–≥–∞—Ü–∞–∞–Ω–¥, —á–∞–Ω–∞—Ä—Ç–∞–π —ç–∑—ç–º—à“Ø“Ø–ª–¥—ç–≥. –ë–∏–¥–Ω–∏–π –≥–æ–ª –æ–Ω—Ü–ª–æ–≥ –±–æ–ª:\n\n"
            "‚ú® –°–∞–ª–±–∞—Ä—ã–Ω —à–∏–ª–¥—ç–≥ —ç–∫—Å–ø–µ—Ä—Ç“Ø“Ø–¥—ç—ç—Å —à—É—É–¥ —Å—É—Ä–∞–ª—Ü–∞–Ω–∞\n"
            "‚ú® –ë–æ–¥–∏—Ç –∫—ç–π—Å, —Ç”©—Å”©–ª –¥—ç—ç—Ä –∞–∂–∏–ª–ª–∞–Ω–∞\n"
            "‚ú® –¢”©–≥—Å—Å”©–Ω–∏–π –¥–∞—Ä–∞–∞ —á —Ç–∞—Å—Ä–∞–ª—Ç–≥“Ø–π –¥—ç–º–∂–ª—ç–≥ “Ø–∑“Ø“Ø–ª–Ω—ç\n"
            "‚ú® AI-–≥ –±“Ø—Ö —Ö”©—Ç”©–ª–±”©—Ä—Ç –∏–¥—ç–≤—Ö—Ç—ç–π –Ω—ç–≤—Ç—Ä“Ø“Ø–ª—Å—ç–Ω\n\n"
            "–¢–æ–≤—á—Ö–æ–Ω–¥–æ–æ, —Ç–∞ ”©”©—Ä–∏–π–Ω –∞–ª—Ç–∞–Ω —Ü–∞–≥–∞–∞ “Ø–Ω—ç—Ö—ç—ç—Ä “Ø—Ä –¥“Ø–Ω—Ç—ç–π —Ö”©—Ä”©–Ω–≥”© –æ—Ä—É—É–ª–∞–ª—Ç –±–æ–ª–≥–æ–Ω–æ üí™"
        ),
    },
    {
        "q_keywords": ["—Ö–∏–π–º—ç–ª –æ—é—É–Ω", "ai", "artificial intelligence", "—Ö–∞–∞–Ω–∞ ai", "ai –∞—à–∏–≥–ª–∞–¥–∞–≥ —É—É"],
        "answer": (
            "–¢–∏–π–º —ç—ç! ü§ñ –ë–∏ –±–æ–ª Way Academy-–∏–π–Ω AI —Ç—É—Å–ª–∞—Ö. –ú–∞–Ω–∞–π –±“Ø—Ö —Ö”©—Ç”©–ª–±”©—Ä—Ç AI-–≥ —Ö—ç—Ä—Ö—ç–Ω –∞—à–∏–≥–ª–∞–∂ "
            "—Ç–∞–Ω—ã –∞–∂–∏–ª, –±“Ø—Ç—ç—ç–º–∂–∏–π–≥ —Ö—ç–¥—ç–Ω –¥–∞—Ö–∏–Ω –Ω—ç–º—ç–≥–¥“Ø“Ø–ª—ç—Ö–∏–π–≥ –∑–∞–∞–¥–∞–≥.\n\n"
            "–ë–∞—Å –º–∞–Ω–∞–π —Å—É—Ä–≥–∞–ª—Ç—ã–Ω —Å–∏—Å—Ç–µ–º ”©”©—Ä”©”© AI –¥—ç—ç—Ä —Å—É—É—Ä–∏–ª–¥–∞–≥ –±”©–≥”©”©–¥ —Ç–∞ —Ö—ç—Ä—Ö—ç–Ω "
            "—Å—É—Ä–∞–ª—Ü–∞–∂ –±–∞–π–≥–∞–∞–≥ —à–∏–Ω–∂–∏–ª–∂, —Ç–∞–Ω–¥ —Ö–∞–º–≥–∏–π–Ω —Ç–æ—Ö–∏—Ä—Å–æ–Ω –∑”©–≤–ª”©–º–∂ ”©–≥–¥”©–≥.\n\n"
            "AI-–≥ –∞—à–∏–≥–ª–∞–∂ –º—ç–¥–¥—ç–≥ —Ö“Ø–Ω –±–æ–ª–æ—Ö–æ–æ—Ä –±–æ–ª –∑”©–≤ –≥–∞–∑–∞—Ä—Ç –∏—Ä–ª—ç—ç üòâ"
        ),
    },
    {
        "q_keywords": ["—Ç–∞—Å—Ä–∞–ª—Ç–≥“Ø–π —Ö”©–≥–∂“Ø“Ø–ª—ç–ª—Ç", "continuous development", "—Ç”©–≥—Å”©”©–¥ —è–∞—Ö –≤—ç"],
        "answer": (
            "–ú–∞–Ω–∞–π–¥ —Ç”©–≥—Å—Å”©–Ω –≥—ç–¥—ç–≥ –Ω—å —Ç”©–≥—Å–≥”©–ª –±–∏—à, —ç—Ö–ª—ç–ª —é–º üöÄ\n\n"
            "–ë–∏–¥ Continuous Development –±—É—é—É —Ç–∞—Å—Ä–∞–ª—Ç–≥“Ø–π —Ö”©–≥–∂“Ø“Ø–ª—ç–ª—Ç–∏–π–Ω –∑–∞—Ä—á–º–∞–∞—Ä –∞–∂–∏–ª–ª–∞–¥–∞–≥. "
            "–≠–Ω—ç –Ω—å —Ç–∞ —Ç”©–≥—Å—Å”©–Ω–∏–π –¥–∞—Ä–∞–∞ —á:\n"
            "‚Ä¢ –®–∏–Ω—ç –º—ç–¥–ª—ç–≥, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏ –≥–∞—Ä–≤–∞–ª –º—ç–¥—ç—ç–ª–Ω—ç\n"
            "‚Ä¢ –ö–∞—Ä—å–µ—Ä—ã–Ω –¥—ç–º–∂–ª—ç–≥ “Ø–∑“Ø“Ø–ª–Ω—ç\n"
            "‚Ä¢ –°“Ø–ª–∂—ç—ç–Ω–∏–π –∞—Ä–≥–∞ —Ö—ç–º–∂—ç—ç–Ω–¥ –æ—Ä–æ–ª—Ü–æ–Ω–æ\n\n"
            "Way Academy-–∏–π–Ω –≥–∏—à“Ø“Ø–Ω –±–æ–ª –Ω–∞—Å–∞–Ω —Ç—É—Ä—à–∏–π–Ω –≥–∏—à“Ø“Ø–Ω –≥—ç—Å—ç–Ω “Ø–≥ üíô"
        ),
    },
    {
        "q_keywords": ["–±–∞–≥—à", "teacher", "–±–∞–≥—à –Ω–∞—Ä", "mentors", "—ç–∫—Å–ø–µ—Ä—Ç"],
        "answer": (
            "–ú–∞–Ω–∞–π –±–∞–≥—à –Ω–∞—Ä –±–æ–ª —Å–∞–ª–±–∞—Ä—Ç–∞–∞ –∂–∏–Ω—Ö—ç–Ω—ç —ç–∫—Å–ø–µ—Ä—Ç“Ø“Ø–¥ üåü\n\n"
            "üë®‚Äçüíº –¢. –ë–∞—Ç–∑–∞—è–∞ ‚Äî —Ö—ç–¥ —Ö—ç–¥—ç–Ω –∫–æ–º–ø–∞–Ω–∏–π–Ω CTO, Project Zero –±–æ–ª–æ–Ω IT BA-–∏–π–Ω –º–∞—Å—Ç–µ—Ä –±–∞–≥—à\n"
            "üë®‚Äçüíº –ß. –ê–ª—Ç–∞–Ω-”®–ª–∑–∏–π ‚Äî Ard Financial Group-–∏–π–Ω Chief Data Officer, Data Analyst –º–∞—Å—Ç–µ—Ä –±–∞–≥—à\n"
            "üë®‚Äçüíº –≠. –≠–Ω—Ö–∑–∞—è–∞ ‚Äî Way Academy “Ø“Ø—Å–≥—ç–Ω –±–∞–π–≥—É—É–ª–∞–≥—á, CEO, –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–∏–π–Ω –º–∞—Å—Ç–µ—Ä –±–∞–≥—à\n\n"
            "–ú–µ–Ω—Ç–æ—Ä—É—É–¥:\n"
            "‚Ä¢ –ñ. –û—é—É–Ω—á–∏–º—ç–≥ (–¢–∞–≤–∞–Ω –ë–æ–≥–¥ –•–æ–ª–¥–∏–Ω–≥—Å CMO)\n"
            "‚Ä¢ –ë. –ù–∞–Ω–¥–∏–Ω-–≠—Ä–¥—ç–Ω—ç (–ê–∫—Å–∏–º–æ –ò–Ω–∫ “Ø“Ø—Å–≥—ç–Ω –±–∞–π–≥—É—É–ª–∞–≥—á)\n\n"
            "–¢—ç–¥ –±–æ–¥–∏—Ç –±–∏–∑–Ω–µ—Å–∏–π–Ω —Ç—É—Ä—à–ª–∞–≥–∞–∞—Ä–∞–∞ —Ö—É–≤–∞–∞–ª—Ü–¥–∞–≥ –Ω—å —Ö–∞–º–≥–∏–π–Ω —Ç–æ–º –¥–∞–≤—É—É —Ç–∞–ª!"
        ),
    },
    {
        "q_keywords": ["—Å—É—É—Ä—å –º—ç–¥–ª—ç–≥", "—Å—É—É—Ä—å –±–∞–π—Ö —Ö—ç—Ä—ç–≥—Ç—ç–π —é—É", "—É—Ä—å–¥—á–∏–ª—Å–∞–Ω –º—ç–¥–ª—ç–≥", "–∞–Ω—Ö–∞–Ω —à–∞—Ç"],
        "answer": (
            "–û–≥—Ç —Å–∞–Ω–∞–∞ –∑–æ–≤–æ—Ö —Ö—ç—Ä—ç–≥–≥“Ø–π! üòä\n\n"
            "–ú–∞–Ω–∞–π —Ö”©—Ç”©–ª–±”©—Ä“Ø“Ø–¥ –±“Ø–≥–¥ –∞–Ω—Ö–∞–Ω —à–∞—Ç–Ω–∞–∞—Å –Ω—å –ª —ç—Ö—ç–ª–¥—ç–≥. –¢–∞ ”©–º–Ω”© –Ω—å —è–º–∞—Ä —á –º—ç–¥–ª—ç–≥–≥“Ø–π "
            "–±–∞–π–∂ –±–æ–ª–Ω–æ ‚Äî –±–∏–¥ —Ç–∞–Ω–¥ —à–∞—Ç –¥–∞—Ä–∞–∞—Ç–∞–π, –æ–π–ª–≥–æ–º–∂—Ç–æ–π –∑–∞–∞–Ω–∞.\n\n"
            "–•–∞–º–≥–∏–π–Ω —á—É—Ö–∞–ª –∑“Ø–π–ª –±–æ–ª:\n"
            "‚úÖ –°—É—Ä–∞—Ö —Ö“Ø—Å—ç–ª\n"
            "‚úÖ –¢—É—É—à—Ç–∞–π –±–∞–π–¥–∞–ª\n"
            "‚úÖ –¶–∞–≥ –≥–∞—Ä–≥–∞–∂ —á–∞–¥–∞—Ö —á–∞–¥–≤–∞—Ä\n\n"
            "–≠–¥–≥—ç—ç—Ä –±–∞–π–≤–∞–ª –ª –±–æ–ª–æ–æ, –±—É—Å–∞–¥ –∑“Ø–π–ª–¥ –±–∏–¥ –∞–Ω—Ö–∞–∞—Ä–Ω–∞ üí™"
        ),
    },
    {
        "q_keywords": ["–∫–ª—É–±", "club", "—Ö–∏—á—ç—ç–ª—ç—ç—Å –≥–∞–¥–Ω–∞", "extracurricular", "–¥—ç–º–∂–ª—ç–≥"],
        "answer": (
            "–ú–∞–Ω–∞–π–¥ –∑”©–≤—Ö”©–Ω —Ö–∏—á—ç—ç–ª –±–∏—à, –æ–ª–æ–Ω —Å–æ–Ω–∏—Ä—Ö–æ–ª—Ç–æ–π –∫–ª—É–±—É—É–¥ –±–∞–π–¥–∞–≥ üéâ\n\n"
            "üó£ –ê–Ω–≥–ª–∏ —Ö—ç–ª–Ω–∏–π —è—Ä–∏–∞–Ω—ã –∫–ª—É–±\n"
            "‚õ∞ –£—É–ª–∞–Ω–¥ –∞–ª—Ö–∞–≥—á–¥—ã–Ω –∫–ª—É–±\n"
            "üé¨ –ö–∏–Ω–æ —Å–æ–Ω–∏—Ä—Ö–æ–≥—á–¥—ã–Ω –∫–ª—É–±\n"
            "üíº –ë–∏–∑–Ω–µ—Å —ç—Ä—Ö–ª—ç–≥—á–¥–∏–π–Ω –∫–ª—É–±\n\n"
            "–≠–¥–≥—ç—ç—Ä –Ω—å —Ç–∞–Ω–¥:\n"
            "‚Ä¢ –®–∏–Ω—ç –Ω–∞–π–∑—É—É–¥ –æ–ª–æ—Ö–æ–¥\n"
            "‚Ä¢ ”®”©—Ä–∏–π–Ω —Å“Ø–ª–∂—ç—ç–≥ ”©—Ä–≥”©–∂“Ø“Ø–ª—ç—Ö—ç–¥\n"
            "‚Ä¢ –ê–º—å–¥—Ä–∞–ª—ã–Ω —á–∞–Ω–∞—Ä–∞–∞ –¥—ç—ç—à–ª“Ø“Ø–ª—ç—Ö—ç–¥ —Ç—É—Å–∞–ª–Ω–∞\n\n"
            "Way Academy-–¥ —Å—É—Ä–∞—Ö –Ω—å –∑”©–≤—Ö”©–Ω –º—ç–¥–ª—ç–≥ –æ–ª–æ—Ö –±–∏—à, –æ—Ä—á–∏–Ω, —Ö“Ø–º“Ø“Ø—Å—Ç—ç–π –±–æ–ª–æ—Ö —Ç—É—Ö–∞–π —é–º ‚ú®"
        ),
    },
    {
        "q_keywords": ["“Ø–Ω—ç —Ü—ç–Ω–∏–π–Ω —Å–∞–Ω–∞–ª", "value proposition", "—é—É–≥–∞–∞—Ä–∞–∞ ”©”©—Ä", "”©”©—Ä –∞–∫–∞–¥–µ–º–∏–∞—Å"],
        "answer": (
            "–ë–∏–¥–Ω–∏–π –≥–æ–ª —Å–∞–Ω–∞–ª –±–æ–ª —ç–Ω–≥–∏–π–Ω: —Ç–∞–Ω—ã –∞–ª—Ç–∞–Ω —Ü–∞–≥–∏–π–≥ “Ø–Ω—ç—Ö—ç—ç—Ä “Ø–Ω—ç —Ü—ç–Ω—ç—Ç—ç–π —ç—Ä–≥—ç–Ω "
            "—Ç”©–ª”©–≥–¥”©—Ö –±–æ–ª–æ–≤—Å—Ä–æ–ª üíé\n\n"
            "”®”©—Ä”©”©—Ä —Ö—ç–ª–±—ç–ª:\n"
            "‚ú® –•”©–¥”©–ª–º”©—Ä–∏–π–Ω –∑–∞—Ö –∑—ç—ç–ª –¥—ç—ç—Ä –û–î–û–û —ç—Ä—ç–ª—Ç—Ç—ç–π –º—ç—Ä–≥—ç–∂–ª“Ø“Ø–¥\n"
            "‚ú® –°–∞–ª–±–∞—Ä—ã–Ω –¢–û–ü —ç–∫—Å–ø–µ—Ä—Ç“Ø“Ø–¥—ç—ç—Å —à—É—É–¥ —Å—É—Ä–∞–ª—Ü–∞—Ö\n"
            "‚ú® –ë–æ–≥–∏–Ω–æ —Ö—É–≥–∞—Ü–∞–∞–Ω–¥ –ø—Ä–∞–∫—Ç–∏–∫ —É—Ä —á–∞–¥–≤–∞—Ä —ç–∑—ç–º—à–∏—Ö\n"
            "‚ú® –¢”©–≥—Å”©”©–¥ —à—É—É–¥ –∞–∂–∏–ª —ç—Å–≤—ç–ª –±–∏–∑–Ω–µ—Å—ç—ç ”©—Å–≥”©—Ö\n\n"
            "–ê–∫–∞–¥–µ–º–∏–∫ —á–∞–Ω–∞—Ä + –±–æ–¥–∏—Ç –∞–º—å–¥—Ä–∞–ª—ã–Ω —Ö—ç—Ä—ç–≥—Ü—ç—ç = Way Academy üöÄ"
        ),
    },
    {
        "q_keywords": ["—Ü–∞–≥", "–∞–∂–∏–ª–ª–∞—Ö —Ü–∞–≥", "—Ö—ç–∑—ç—ç –Ω—ç—ç–ª—Ç—Ç—ç–π", "schedule", "—Ö—É–≤–∞–∞—Ä—å", "working hours", "open"],
        "answer": (
            "üïê –ú–∞–Ω–∞–π –∞–∂–∏–ª–ª–∞—Ö —Ü–∞–≥:\n\n"
            "–ê–∂–ª—ã–Ω ”©–¥”©—Ä: 10:00‚Äì20:00\n"
            "–ê–º—Ä–∞–ª—Ç—ã–Ω ”©–¥”©—Ä (–ë—è–º–±–∞, –ù—è–º): 11:00‚Äì18:00\n\n"
            "–•”©—Ç”©–ª–±”©—Ä –±“Ø—Ä ”©”©—Ä ”©”©—Ä —Ö—É–≤–∞–∞—Ä—å—Ç–∞–π –±–∞–π–¥–∞–≥. –°–æ–Ω–∏—Ä—Ö–æ–∂ –±—É–π —Ö”©—Ç”©–ª–±”©—Ä–∏–π–Ω –Ω—ç—Ä–∏–π–≥ "
            "–ª –±–∏—á—ç—ç—Ä—ç–π, —Ç—ç—Ä —Ö”©—Ç”©–ª–±”©—Ä–∏–π–Ω —è–≥ —Ö—É–≤–∞–∞—Ä–∏–π–≥ —Ö—ç–ª—å–µ üòä"
        ),
    },
    {
        "q_keywords": ["—Ö–∞—è–≥", "–±–∞–π—Ä—à–∏–ª", "location", "address", "—Ö–∞–∞–Ω–∞ –±–∞–π–¥–∞–≥"],
        "answer": (
            "üìç –ú–∞–Ω–∞–π —Ö–∞—è–≥:\n\n"
            "Way Academy\n"
            "Galaxy Tower, 7 –¥–∞–≤—Ö–∞—Ä, 705 —Ç–æ–æ—Ç\n"
            "–ú–∞—Ö–∞—Ç–º–∞ –ì–∞–Ω–¥–∏ –≥—É–¥–∞–º–∂\n"
            "–£–ª–∞–∞–Ω–±–∞–∞—Ç–∞—Ä, –ú–æ–Ω–≥–æ–ª –£–ª—Å\n\n"
            "–•–∞–º–≥–∏–π–Ω –æ–π—Ä –æ—Ä—Ü –Ω—å Galaxy Tower-–∏–π–Ω –∞—Ä–¥ —Ç–∞–ª–∞–∞—Å –±–∞–π–¥–∞–≥. "
            "–•—ç—Ä—ç–≤ –æ–ª–¥–æ—Ö–≥“Ø–π –±–æ–ª 99201187 —Ä—É—É –∑–∞–ª–≥–∞–∞—Ä–∞–π, —Ö“Ø—Ä–≥—ç–∂ ”©–≥—å–µ üòä"
        ),
    },
    {
        "q_keywords": ["—É—Ç–∞—Å", "—Ö–æ–ª–±–æ–≥–¥–æ—Ö", "contact", "phone", "–∏–º—ç–π–ª", "email"],
        "answer": (
            "üìû –•–æ–ª–±–æ–≥–¥–æ—Ö –º—ç–¥—ç—ç–ª—ç–ª:\n\n"
            "–£—Ç–∞—Å: 99201187\n"
            "Email: hello@wayconsulting.io\n\n"
            "–ê—Å—É—É—Ö –∑“Ø–π–ª –±–∞–π–≤–∞–ª —è–≥ –æ–¥–æ–æ –∑–∞–ª–≥–∞–∞—Ä–∞–π —ç—Å–≤—ç–ª –∏–º—ç–π–ª –∏–ª–≥—ç—ç–≥—ç—ç—Ä—ç–π. "
            "–ë–∏–¥ —Ç–∞–Ω–¥ ”©–¥—Ä–∏–π–Ω 24 —Ü–∞–≥—Ç —Ö–∞—Ä–∏—É–ª–∞—Ö –≥—ç–∂ —Ö–∏—á—ç—ç–¥—ç–≥ üí¨"
        ),
    },
]

# ---------------- –¢–£–°–õ–ê–• –§–£–ù–ö–¶–£–£–î ---------------- #
def match_course_info(user_message: str) -> str | None:
    """–•—ç—Ä—ç–≥–ª—ç–≥—á —Ç–æ–¥–æ—Ä—Ö–æ–π —Ö”©—Ç”©–ª–±”©—Ä –∞—Å—É—É—Å–∞–Ω —ç—Å—ç—Ö–∏–π–≥ —à–∞–ª–≥–∞–∞–¥, —Ç–∞–∞—Ä–≤–∞–ª –¥—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π –º—ç–¥—ç—ç–ª—ç–ª –±—É—Ü–∞–∞–Ω–∞."""
    msg = user_message.lower()
    for c in COURSE_DATA:
        if any(kw in msg for kw in c["keywords"]):
            txt = f"üéì {c['course_name']}\n\n"
            txt += c["description"] + "\n\n"
            txt += f"üë®‚Äçüè´ –ú–∞—Å—Ç–µ—Ä –±–∞–≥—à: {c['teacher']}\n"
            txt += f"‚è≥ –•—É–≥–∞—Ü–∞–∞: {c['duration']}\n"

            # –•—É–≤–∞–∞—Ä—å
            schedule = c.get("schedule") or {}
            if isinstance(schedule, dict):
                for _, v in schedule.items():
                    txt += f"üìÖ {v}\n"
            else:
                txt += f"üìÖ {schedule}\n"

            price = c.get("price") or {}
            if any(price.values()):
                txt += "\nüí∞ –¢”©–ª–±”©—Ä:\n"
                if price.get("full"):
                    txt += f"  ‚Ä¢ “Æ–Ω–¥—Å—ç–Ω: {price['full']}\n"
                if price.get("discount"):
                    txt += f"  ‚Ä¢ –•”©–Ω–≥”©–ª”©–ª—Ç—Ç—ç–π: {price['discount']}\n"
                if price.get("discount_until"):
                    txt += f"  ‚Ä¢ –•—É–≥–∞—Ü–∞–∞: {price['discount_until']}\n"

            payment_options = c.get("payment_options") or []
            if payment_options:
                txt += "\nüí≥ –¢”©–ª–±”©—Ä–∏–π–Ω —É—è–Ω —Ö–∞—Ç–∞–Ω –Ω”©—Ö—Ü”©–ª:\n"
                for p in payment_options:
                    txt += f"  ‚Ä¢ {p}\n"

            if "application_link" in c:
                txt += f"\nüîó ”®—Ä–≥”©–¥”©–ª –∏–ª–≥—ç—ç—Ö: {c['application_link']}\n"

            txt += "\n\n–ê—Å—É—É—Ö –∑“Ø–π–ª –±–∞–π–≤–∞–ª —á”©–ª”©”©—Ç—ç–π –∞—Å—É—É–≥–∞–∞—Ä–∞–π, –±–∏ —ç–Ω–¥ –±–∞–π–Ω–∞ üòä"
            return txt
    return None


def match_faq(user_message: str) -> str | None:
    """–ï—Ä”©–Ω—Ö–∏–π FAQ –∞—Å—É—É–ª—Ç—Ç–∞–π —Ç–∞–∞—Ä–≤–∞–ª —Ö–∞—Ä–∏—É–≥ –Ω—å –±—É—Ü–∞–∞–Ω–∞."""
    text = user_message.lower()
    for item in FAQ_LIST:
        if any(kw.lower() in text for kw in item["q_keywords"]):
            return item["answer"]
    return None


def should_ask_phone(user_message: str, turn: int | None = None) -> bool:
    """
    –•—ç—Ä—ç–≥–ª—ç–≥—á –±“Ø—Ä—Ç–≥“Ø“Ø–ª—ç—Ö, —ç–ª—Å—ç—Ö, —É—Ç—Å–∞–∞—Ä —Ö–æ–ª–±–æ–≥–¥–æ—Ö, –∏–ª“Ø“Ø —Ç–æ–¥–æ—Ä—Ö–æ–π –º—ç–¥—ç—ç–ª—ç–ª –∞–≤–∞—Ö
    ”©–Ω–≥”© –∞—è—Å –≥–∞—Ä–≥–∞—Ö–∞–¥ true –±–æ–ª–≥–æ–Ω–æ.
    """
    msg = (user_message or "").lower()

    core_triggers = [
        "–±“Ø—Ä—Ç",      # –±“Ø—Ä—Ç–≥“Ø“Ø–ª, –±“Ø—Ä—Ç–≥“Ø“Ø–ª—ç—Ö, –±“Ø—Ä—Ç–≥—ç–ª, –±“Ø—Ä—Ç–≥“Ø“Ø–ª–º—ç—ç—Ä...
        "—ç–ª—Å",       # —ç–ª—Å—ç—Ö, —ç–ª—Å—ç–ª—Ç, —ç–ª—Å“Ø“Ø–ª...
        "—É—Ç–∞—Å",      # —É—Ç—Å–∞–∞—Ä —è—Ä–∏–º–∞–∞—Ä, —É—Ç–∞—Å–Ω—ã –¥—É–≥–∞–∞—Ä...
        "–¥—É–≥–∞–∞—Ä",    # –¥—É–≥–∞–∞—Ä–∞–∞ “Ø–ª–¥—ç—ç–Ω—ç –≥—ç—Ö –º—ç—Ç
        "–∑”©–≤–ª”©–≥”©”©",  # –∑”©–≤–ª”©–≥”©”© –∞–≤–∞—Ö, –∑”©–≤–ª”©–≥”©”© ”©–≥”©”©—á
    ]

    print("DEBUG | should_ask_phone | msg:", msg)
    matched = [kw for kw in core_triggers if kw in msg]
    print("DEBUG | matched keywords:", matched, "| turn:", turn)

    if not matched:
        return False

    # –•—ç—Ä—ç–≤ turn ”©–≥—Å”©–Ω –±–æ–ª –¥–æ—Ä —Ö–∞—è–∂ 1-—ç—ç—Å –¥—ç—ç—à —á–∞—Ç–Ω—ã –¥–∞—Ä–∞–∞ –∞—Å—É—É—è
    if turn is not None and turn < 1:
        return False

    return True


def get_soft_conversion_reply() -> str:
    """
    –£—Ç–∞—Å –∞–≤–∞—Ö—ã–Ω ”©–º–Ω”©—Ö –∏—Ç–≥—ç–ª —Ç”©—Ä“Ø“Ø–ª—ç—Ö, “Ø–Ω—ç —Ü—ç–Ω ”©–≥—Å”©–Ω soft conversion —Ç–µ–∫—Å—Ç.
    """
    return (
        "–•”©”©—Ä—Ö”©–Ω –±–∞–π–Ω–∞ –∞–∞, —Ç–∞–Ω—ã –∑–æ—Ä–∏–ª–≥–æ, —Ü–∞–≥–∏–π–Ω –±–æ–ª–æ–º–∂–∏–π–≥ —Å–æ–Ω—Å–æ–æ–¥ —è–≥ —Ç–æ—Ö–∏—Ä—Å–æ–Ω —Ö”©—Ç”©–ª–±”©—Ä, "
        "—Ö—É–≤–∞–∞—Ä—å, —Ç”©–ª–±”©—Ä–∏–π–Ω –º—ç–¥—ç—ç–ª–ª–∏–π–≥ –±“Ø—Ä –∏–ª“Ø“Ø —Ç–æ–¥–æ—Ä—Ö–æ–π —Ö—ç–ª–∂ ”©–≥–º”©”©—Ä –±–∞–π–Ω–∞ ‚ú®\n\n"
        "–¢–∞–Ω–¥ –∏–ª“Ø“Ø —Ç–æ–¥–æ—Ä—Ö–æ–π, —Ö—É–≤—å–¥–∞–∞ —Ç–æ—Ö–∏—Ä—Å–æ–Ω –∑”©–≤–ª”©–≥”©”© ”©–≥”©—Ö–∏–π–Ω —Ç—É–ª–¥ "
        "–º–∞–Ω–∞–π –∑”©–≤–ª”©—Ö 2‚Äì5 –º–∏–Ω—É—Ç—ã–Ω –¥–æ—Ç–æ—Ä —É—Ç—Å–∞–∞—Ä —Ö–æ–ª–±–æ–≥–¥–æ–∂ –º—ç–¥—ç—ç–ª—ç–ª ”©–≥”©—Ö –±–æ–ª–æ–º–∂—Ç–æ–π.\n\n"
        "–•—ç—Ä–≤—ç—ç —Ç—ç–≥–∂ —è—Ä–∏–ª—Ü–º–∞–∞—Ä –±–∞–π–≤–∞–ª –¥–∞—Ä–∞–∞–≥–∏–π–Ω –∞–ª—Ö–∞–º –¥—ç—ç—Ä —É—Ç–∞—Å–Ω—ã –¥—É–≥–∞–∞—Ä–∞–∞ “Ø–ª–¥—ç—ç–≥—ç—ç—Ä—ç–π üòä"
    )


def generate_ai_reply(user_message: str) -> str:
    """
    1) –≠—Ö–ª—ç—ç–¥ —Ç–æ–¥–æ—Ä—Ö–æ–π —Ö”©—Ç”©–ª–±”©—Ä–∏–π–Ω –∞—Å—É—É–ª—Ç —É—É –≥—ç–¥–≥–∏–π–≥ —à–∞–ª–≥–∞–Ω–∞
    2) –î–∞—Ä–∞–∞ –Ω—å FAQ —à–∞–ª–≥–∞–Ω–∞
    3) –¢–∞–∞—Ä–∞—Ö–≥“Ø–π –±–æ–ª OpenAI LLM-—ç—ç—Ä –Ω–∞–π—Ä—Å–∞–≥ —Ö–∞—Ä–∏—É –≥–∞—Ä–≥–∞–Ω–∞
    """

    # 1. –•”©—Ç”©–ª–±”©—Ä–∏–π–Ω –º—ç–¥—ç—ç–ª—ç–ª
    course_answer = match_course_info(user_message)
    if course_answer:
        return course_answer

    # 2. FAQ
    faq_answer = match_faq(user_message)
    if faq_answer:
        return faq_answer

    # 3. AI —Ö–∞—Ä–∏—É
    system_prompt = """
–¢–∞ Way Academy-–∏–π–Ω –Ω–∞–π—Ä—Å–∞–≥, —Ö“Ø–Ω–¥ —Ç—É—Å–ª–∞—Ö –¥—É—Ä—Ç–∞–π AI —Ç—É—Å–ª–∞—Ö —é–º.

=== –¢–ê–ù–ò–õ–¶–£–£–õ–ì–ê ===
Way Academy ‚Äî –£–ª–∞–∞–Ω–±–∞–∞—Ç–∞—Ä—Ç –±–∞–π—Ä–ª–∞–¥–∞–≥ —Å—É—Ä–≥–∞–ª—Ç—ã–Ω —Ç”©–≤
üìç –•–∞—è–≥: Galaxy Tower, 7 –¥–∞–≤—Ö–∞—Ä 705, –ú–∞—Ö–∞—Ç–º–∞ –ì–∞–Ω–¥–∏ –≥—É–¥–∞–º–∂
üìû –•–æ–ª–±–æ–æ –±–∞—Ä–∏—Ö: 99201187
‚úâ Email: hello@wayconsulting.io
üïê –ê–∂–∏–ª–ª–∞—Ö —Ü–∞–≥: –ê–∂–ª—ã–Ω ”©–¥”©—Ä 10:00‚Äì20:00, –ê–º—Ä–∞–ª—Ç—ã–Ω ”©–¥”©—Ä 11:00‚Äì18:00

=== –•”®–¢”®–õ–ë”®–†“Æ“Æ–î ===
1. –°—Ç—Ä–∞—Ç–µ–≥–∏–π–Ω –î–∏–∂–∏—Ç–∞–ª –ú–∞—Ä–∫–µ—Ç–µ—Ä (5 —Å–∞—Ä, Meta —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç)
2. Data Analyst (4 —Å–∞—Ä, Google —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—Ç–∞–π, 100% –∞–∂–ª—ã–Ω –±–∞–π—Ä—Ç–∞–π)
3. IT Business Analyst (3 —Å–∞—Ä, 100% –∞–∂–ª—ã–Ω –±–∞–π—Ä—Ç–∞–π)
4. Project Zero: AI Agent Developer (4 —Å–∞—Ä, –æ–Ω—Ü–≥–æ–π —ç–ª—Å—ç–ª—Ç—Ç—ç–π)

=== –ê–ö–ê–î–ï–ú–ò–ô–ù –û–ù–¶–õ–û–ì ===
‚Ä¢ –°–∞–ª–±–∞—Ä—ã–Ω –¢–û–ü —ç–∫—Å–ø–µ—Ä—Ç“Ø“Ø–¥ –∑–∞–∞–¥–∞–≥ (C-level, “Ø“Ø—Å–≥—ç–Ω –±–∞–π–≥—É—É–ª–∞–≥—á–∏–¥)
‚Ä¢ –ë–æ–¥–∏—Ç —Ç”©—Å”©–ª, –∫–æ–º–ø–∞–Ω–∏–π–Ω –∫—ç–π—Å –¥—ç—ç—Ä –∞–∂–∏–ª–ª–∞–Ω–∞
‚Ä¢ AI-–≥ –±“Ø—Ö —Ö”©—Ç”©–ª–±”©—Ä—Ç –Ω—ç–≤—Ç—Ä“Ø“Ø–ª—Å—ç–Ω
‚Ä¢ Continuous Development: –¢”©–≥—Å—Å”©–Ω–∏–π –¥–∞—Ä–∞–∞ —á —Ç–∞—Å—Ä–∞–ª—Ç–≥“Ø–π –¥—ç–º–∂–ª—ç–≥
‚Ä¢ –ö–ª—É–±—É—É–¥: –∞–Ω–≥–ª–∏ —Ö—ç–ª, —É—É–ª—ã–Ω –∞–ª—Ö–∞–ª—Ç, –∫–∏–Ω–æ, –±–∏–∑–Ω–µ—Å —ç—Ä—Ö–ª—ç–≥—á–∏–¥

–ë–ê–ì–® –ù–ê–†:
‚Ä¢ –¢. –ë–∞—Ç–∑–∞—è–∞ ‚Äî CTO, Project Zero & IT BA –º–∞—Å—Ç–µ—Ä –±–∞–≥—à
‚Ä¢ –ß. –ê–ª—Ç–∞–Ω-”®–ª–∑–∏–π ‚Äî Ard Financial Group-–∏–π–Ω CDO, Data Analyst –º–∞—Å—Ç–µ—Ä –±–∞–≥—à
‚Ä¢ –≠. –≠–Ω—Ö–∑–∞—è–∞ ‚Äî Way Academy “Ø“Ø—Å–≥—ç–Ω –±–∞–π–≥—É—É–ª–∞–≥—á, CEO, –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–∏–π–Ω –º–∞—Å—Ç–µ—Ä –±–∞–≥—à

=== –¢–ê–ù–´ –•–ê–†–ò–õ–¶–ê–• –•–≠–í –ú–ê–Ø–ì ===
‚úÖ –•–ò–ô–• –ó“Æ–ô–õ–°:
- –ù–∞–π—Ä—Å–∞–≥, –æ–π—Ä –¥–æ—Ç–Ω–æ, —Ö“Ø–º“Ø“Ø–Ω–ª—ç–≥ –±–∞–π—Ö
- Emoji –∑–æ—Ö–∏—Å—Ç–æ–π —Ö—ç–º–∂—ç—ç–≥—ç—ç—Ä (1-3 —Ö–∞—Ä–∏—É–ª—Ç –±“Ø—Ä—Ç)
- –¢–æ–≤—á, –æ–π–ª–≥–æ–º–∂—Ç–æ–π —Ö–∞—Ä–∏—É–ª–∞—Ö (2-5 ”©–≥“Ø“Ø–ª–±—ç—Ä)
- –ó”©–≤–ª”©–≥”©”© ”©–≥”©—Ö, —Ö–∞—Ä–∏–Ω –∞–ª–±–∞–¥–∞—Ö–≥“Ø–π –±–∞–π—Ö
- –•—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω –∑–æ—Ä–∏–ª–≥—ã–≥ —Ç–æ–¥—Ä—É—É–ª–∂ –∞—Å—É—É—Ö

‚ùå –•–ò–ô–•–ì“Æ–ô –ó“Æ–ô–õ–°:
- –†–æ–±–æ—Ç —à–∏–≥ –∞–ª–±–∞–Ω —ë—Å–æ–æ—Ä —è—Ä–∏—Ö–≥“Ø–π
- "–¢–∞ –∑–∞–∞–≤–∞–ª...", "–≠—Ö–ª—ç—ç–¥... —Ö–∏–π–≥—ç—ç—Ä—ç–π" –≥—ç—Ö –∑–∞—Ö–∏—Ä–≥–∞–∞–Ω—ã ”©–Ω–≥”© –∞—è—Å–≥“Ø–π
- –•—ç—Ç —É—Ä—Ç —Ç–∞–π–ª–±–∞—Ä –±–∏—á–∏—Ö–≥“Ø–π
- –ú—ç–¥—ç—Ö–≥“Ø–π –∑“Ø–π–ª—ç—ç –∑–æ—Ö–∏–æ—Ö–≥“Ø–π
- Emoji-–≥ –∏–ª“Ø“Ø–¥“Ø“Ø–ª—ç—Ö–≥“Ø–π (2-3 –ª —Ö–∞–Ω–≥–∞–ª—Ç—Ç–∞–π)

üéØ –•–≠–†–≠–ì–õ–≠–ì–ß–ò–ô–ù –•–≠–†–≠–ì–¶–≠–≠ –¢–û–î–†–£–£–õ–ê–•:
–•—ç—Ä—ç–≤ —Ö—ç—Ä—ç–≥–ª—ç–≥—á "–ê–ª—å —Ö”©—Ç”©–ª–±”©—Ä –Ω–∞–¥–∞–¥ —Ç–æ—Ö–∏—Ä–æ—Ö –≤—ç?" –≥—ç–∂ –∞—Å—É—É–≤–∞–ª:
- –û–¥–æ–æ–≥–∏–π–Ω –º—ç—Ä–≥—ç–∂–∏–ª/—Ç“Ø–≤—à–∏–Ω–≥ –Ω—å –∞—Å—É—É—Ö
- –ó–æ—Ä–∏–ª–≥—ã–≥ –Ω—å —Å–æ–Ω—Å–æ—Ö (–∞–∂–∏–ª–¥ –æ—Ä–æ—Ö, –±–∏–∑–Ω–µ—Å ”©—Å–≥”©—Ö, —É—Ä —á–∞–¥–≤–∞—Ä –¥—ç—ç—à–ª“Ø“Ø–ª—ç—Ö)
- –ß”©–ª”©”©—Ç—ç–π —Ü–∞–≥–∏–π–≥ –Ω—å –º—ç–¥—ç—Ö (–æ—Ä–æ–π/”©–¥”©—Ä/–∞–º—Ä–∞–ª—Ç—ã–Ω ”©–¥”©—Ä)
- –î–∞—Ä–∞–∞ –Ω—å 1-2 —Ö”©—Ç”©–ª–±”©—Ä–∏–π–≥ —Å–∞–Ω–∞–ª –±–æ–ª–≥–æ—Ö

=== –°–ê–ù–ê–ú–ñ ===
–ë“Ø—Ö —Ö–∞—Ä–∏—É–ª—Ç–∞–∞ –ó”®–í–•”®–ù –º–æ–Ω–≥–æ–ª–æ–æ—Ä ”©–≥. –ù–∞–π—Ä—Å–∞–≥, —Ö“Ø–Ω–ª—ç–≥, —ç–Ω–≥–∏–π–Ω –±–∞–π–∂ —è—Ä–∏–∞—Ä–∞–π, —Ä–æ–±–æ—Ç –±–∏—à!
"""


    try:
        completion = client.chat.completions.create(
            model="gpt-4.1-mini",  # —Ö—ç—Ä—ç–≥–ª—ç—Ö –º–æ–¥–µ–ª—ç—ç —ç–Ω–¥ —Ç–∞–∞—Ä—É—É–ª–∂ —Å–æ–ª–∏–æ—Ä–æ–π
            messages=[
                {"role": "system", "content": system_prompt},
                {"role": "user", "content": user_message},
            ],
            temperature=0.7,
        )
        return completion.choices[0].message.content.strip()
    except Exception as e:
        print(f"OpenAI API Error: {e}")
        return "–£—É—á–ª–∞–∞—Ä–∞–π, –æ–¥–æ–æ–≥–æ–æ—Ä —Å–∏—Å—Ç–µ–º–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞. –¢–∞ –¥–∞—Ä–∞–∞ –¥–∞—Ö–∏–Ω –æ—Ä–æ–ª–¥–æ–Ω–æ —É—É —ç—Å–≤—ç–ª 99201187 –¥—É–≥–∞–∞—Ä—Ç —Ö–æ–ª–±–æ–≥–¥–æ–æ—Ä–æ–π."


# ---------------- ManyChat EXTERNAL REQUEST ENDPOINT ---------------- #
@app.post("/manychat-ai")
def manychat_ai():
    """
    ManyChat ‚Üí External Request ‚Üí —ç–Ω–¥ POST —Ö–∏–π–Ω—ç.

    –û—Ä–æ–ª—Ç JSON:
      {
        "text": "{{last_input}}",
        "turn": "{{custom.msg_count}}"   # optional
      }

    –ì–∞—Ä–∞–ª—Ç JSON:
      {
        "reply": "....",
        "ask_phone": true/false
      }

    ask_phone == true –±–æ–ª ManyChat —Ç–∞–ª–¥–∞–∞ Phone CTA buttons –≥–∞—Ä–≥–∞–Ω–∞.
    """

    data = request.get_json(silent=True) or {}
    print("===== MANYCHAT EVENT =====")
    print(data)

    user_text = ""

    if isinstance(data.get("text"), str):
        user_text = data["text"].strip()
    elif isinstance(data.get("data"), dict) and isinstance(data["data"].get("text"), str):
        user_text = data["data"]["text"].strip()
    elif isinstance(data.get("message"), dict) and isinstance(data["message"].get("text"), str):
        user_text = data["message"]["text"].strip()
    elif isinstance(data.get("content"), dict) and isinstance(data["content"].get("text"), str):
        user_text = data["content"]["text"].strip()

    if not user_text:
        user_text = "–°–∞–π–Ω –±–∞–π–Ω–∞ —É—É? Way Academy-–∏–π–Ω —Ç–∞–ª–∞–∞—Ä —é—É —Å–æ–Ω–∏—Ä—Ö–æ–∂ –±–∞–π–Ω–∞ –≤—ç? üòä"

    # turn: ManyChat –¥–æ—Ç–æ—Ä custom field –±–∞–π–∂ –±–æ–ª–Ω–æ (optional)
    turn = None
    if "turn" in data:
        try:
            turn = int(data["turn"])
        except (TypeError, ValueError):
            turn = None

    ask_phone = should_ask_phone(user_text, turn=turn)

    if ask_phone:
        reply_text = get_soft_conversion_reply()
    else:
        reply_text = generate_ai_reply(user_text)

    return jsonify({
        "reply": reply_text,
        "ask_phone": ask_phone
    })



@app.route("/", methods=["GET"])
def health_check():
    return "OK", 200

# ---------------- Main ---------------- #
if __name__ == "__main__":
    # Railway ”©”©—Ä–∏–π–Ω PORT env ”©–≥–¥”©–≥, —Ç—ç—Ä–∏–π–≥ —É–Ω—à–∏–Ω–∞. –ë–∞–π—Ö–≥“Ø–π –±–æ–ª 5000-–≥ default –±–æ–ª–≥–æ–Ω–æ.
    port = int(os.environ.get("PORT", 5000))
    app.run(host="0.0.0.0", port=port, debug=False)
